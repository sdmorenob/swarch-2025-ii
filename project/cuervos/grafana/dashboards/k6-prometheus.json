{
  "annotations": {"list": []},
  "description": "Visualize k6 OSS results stored in Prometheus",
  "editable": true,
  "gnetId": 19665,
  "graphTooltip": 2,
  "panels": [
    {
      "type": "stat",
      "title": "RPS",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "gridPos": {"h": 6, "w": 8, "x": 0, "y": 0},
      "targets": [{"expr": "sum(rate(k6_http_reqs[1m]))", "refId": "A"}]
    },
    {
      "type": "stat",
      "title": "Errores %",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "gridPos": {"h": 6, "w": 8, "x": 8, "y": 0},
      "targets": [{"expr": "100 * (sum(rate(k6_http_req_failed[1m])) / clamp_min(sum(rate(k6_http_reqs[1m])), 1))", "refId": "A"}]
    },
    {
      "type": "timeseries",
      "title": "Latencia (avg)",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "gridPos": {"h": 8, "w": 16, "x": 0, "y": 6},
      "targets": [{"expr": "avg(k6_http_req_duration)", "refId": "A"}]
    },
    {
      "type": "timeseries",
      "title": "Latencia (p95)",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "gridPos": {"h": 8, "w": 16, "x": 0, "y": 14},
      "targets": [{"expr": "quantile_over_time(0.95, k6_http_req_duration[$__interval])", "refId": "A"}]
    }
    ,
    {
      "type": "timeseries",
      "title": "Latencia por testid (avg)",
      "datasource": {"type": "prometheus", "uid": "Prometheus"},
      "gridPos": {"h": 8, "w": 16, "x": 0, "y": 22},
      "targets": [
        {"expr": "avg by (testid) (k6_http_req_duration{testid=~\"$testid\"})", "refId": "A", "legendFormat": "{{testid}}"}
      ]
    }
  ],
  "schemaVersion": 39,
  "tags": ["prometheus", "k6"],
  "templating": {
    "list": [
      {
        "type": "adhoc",
        "name": "adhoc_filter",
        "label": "AdhocFilter",
        "datasource": {"type": "prometheus", "uid": "Prometheus"},
        "filters": []
      },
      {
        "type": "query",
        "name": "testid",
        "label": "Test ID",
        "datasource": {"type": "prometheus", "uid": "Prometheus"},
        "query": "label_values(k6_http_reqs, testid)",
        "refresh": 1,
        "includeAll": true,
        "multi": false,
        "hide": 0
      }
    ]
  },
  "time": {"from": "now-15m", "to": "now"},
  "timepicker": {},
  "timezone": "",
  "title": "k6 Prometheus (simplified)",
  "uid": "k6-prometheus-simplified",
  "version": 1
}